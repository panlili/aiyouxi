<form class="common_form">
    <p><label>*条码号：</label><input type="text" name="serial"/></p>
    <p><label>*物资名：</label><input type="text" name="name"/></p>
    <p><label>数量：</label><input type="text" name="number"/></p>
    <p><label>单位：</label><input type="text" name="unit"/></p>
    <p><label>计量：</label><input type="text" name="measure"/></p>
    <p><label>捐赠人编号：</label><input type="text" name="donater_id"/></p>
    <p><label>收据号：</label><input type="text" name="receipt"/></p>
    <p>
        <label>&nbsp;</label>
        <input type="button" value="添加物资" onclick="add_data('__APP__/Good/add',$('.common_form').serialize(),callback_add_good)"/>
        <input type="reset" value="重置" />
    </p>
</form>

<script type="text/javascript">
    $(function(){

        $("input:button,input:reset").button();
		
        $( "input[name=donater_id]" ).autocomplete({
            source:function(request, response){
                $.get("__APP__/Donater/getDonaterList",{serial: request.term },function(data){
                    if(0==data.status)
                    {
                        if(window.confirm(data.info))
							window.location="__APP__/Donater/donaters";
						else
							$("input[name=donater_id]").val("");
                    }
                    else
                    {	//response的参数是$.map函数返回的json对象
                        //可以先var objects=$.map(), 后response(objects)
                        response($.map(data,function(data){
                            return {
                                label:"姓名："+data.name+" 编号："+data.serial,
                                value:data.id
                            }
                        }));
                    }
                },"JSON");
            },
		});

        $("a.change").qtip({
            content: {text:"点击修改捐赠者数据"},
            position: {my:  'left center',at: 'right center'}
        });
    });
</script>